# invest-strategy-testing

Тест стратеги.

- Добавить аргумент день недели (Monday, Tuesday, Wednesday, Thursday, Friday). Опционально, по умолчанию установить Friday
- Добавить аргумент шаг цены, это целое или дробное число. Опционально, по умолчанию равно 1
- Отображать график доходности и график пополнения для Простой стратегии и Тестируемой стратегии
- Указать в отчете максимальную просадку для Простой стратегии и Тестируемой стратегии
- Указать в отчете количество акций на конец ткстирования для Простой стратегии и Тестируемой стратегии
- Указать в отчете cумму в $ на конец текстирования исходя из текущей стоимости тикера для Простой стратегии и Тестируемой стратегии
- Указать в отчете среднегодовой возврат от инвестиций для Простой стратегии и Тестируемой стратегии
- Добавить реинвестирование дивидентов

Внеси изменения в расчет Параметры стратегии. Вариант 1
- Если цена падает на -10% от последнего максимума, покупаем на сумму равную сумме еженедельного пополнения умноженной на шаг цены и умноженным на 2
- Если цена падает на -20% от последнего максимума, покупаем на сумму равную сумме еженедельного пополнения умноженной на шаг цены и умноженным на 3
- Если цена падает на -30% от последнего максимума, покупаем на сумму равную сумме еженедельного пополнения умноженной на шаг цены и умноженным на 4

Внеси изменения в расчет Параметры стратегии. Вариант 2
- Если цена падает на -10% от последнего максимума, покупаем на сумму равную сумме еженедельного пополнения умноженным на multiplier
- Если цена падает на -20% от последнего максимума, покупаем на сумму равную сумме еженедельного предыдущего пополнения умноженной на multiplier
- Если цена падает на -30% от последнего максимума, покупаем на сумму равную сумме еженедельного предыдущего пополнения умноженной на multiplier

Отчет должен содержать:
- сколько всего средств было вложено
- какая максимальная просадка за переиод в процентах от вложеного на тот момент капитала
- сравить итоговый результат

### Подготовка окружения и запуск скрипта

Тикер QQQ. Начало инвистиций 1 января 2024 года по конец декабря 2024 года.
Покупаем каждую пятницу на $100, по цене закрытия дня.

### Как запустить скрипт
```
python3 -m venv path/to/venv                                                                                     
source path/to/venv/bin/activate
pip install yfinance pandas numpy matplotlib ta
python test_simple.py QQQ 100 2024-01-01 --end_date 2024-12-31
```

 ### Файл отчета

```=== Простая стратегия ===
Сумма еженедельного пополнения в долларах: <сумма в $>. Тикер: <ticker>
Общая сумма вложений: $49000.00
Итоговая стоимость портфеля: $53434.39
Количество акций в портфеле на конец периода: ?
Прибыль на конец периода без учета девидентов: $4343.39
Возврат от инвестиций без учета девидентов за весь период: 9.12%
Максимальная просадка: -4.99%
Среднегодовой Возврат от инвестиций за период без учета девидентов (CAGR): %

=== Результаты стратегии Тестовой стратегии ===
Сумма еженедельного пополнения в долларах: <сумма в $>. Тикер: <ticker>
Общая сумма вложений: $65000.00
Итоговая стоимость портфеля: $71744.98
Количество акций в портфеле на конец периода: ?
Прибыль на конец периода без учета девидентов: $6.744
Возврат от инвестиций без учета девидентов за весь период: 10.7%
Максимальная просадка: -4.99%
Среднегодовой Возврат от инвестиций за период без учета девидентов (CAGR): %

Ежемесячные вложения:
   YearMonth  Investment
0    2024-01      3000.0
1    2024-02      3000.0
2    2024-03      4000.0
3    2024-04      5000.0
4    2024-05      3000.0
5    2024-06      4000.0
6    2024-07      5000.0
7    2024-08     18000.0
8    2024-09      6000.0
9    2024-10      4000.0
10   2024-11      4000.0
11   2024-12      5000.0
12   2025-01      1000.0
```