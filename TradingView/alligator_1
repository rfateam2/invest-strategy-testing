// This Pine Script™ code is subject to the terms of the Mozilla Public License 2.0 at https://mozilla.org/MPL/2.0/
// © korvinca

//@version=5
indicator("Williams Alligator Indicator", overlay=true)

// Input parameters for Williams Alligator
jawLength = input(13, title="Jaw Length")
jawOffset = input(8, title="Jaw Offset")
teethLength = input(8, title="Teeth Length")
teethOffset = input(5, title="Teeth Offset")
lipsLength = input(5, title="Lips Length")
lipsOffset = input(3, title="Lips Offset")

// Calculate the Alligator lines
jaw = ta.sma(hl2, jawLength)[jawOffset]
teeth = ta.sma(hl2, teethLength)[teethOffset]
lips = ta.sma(hl2, lipsLength)[lipsOffset]

// Plot the Alligator lines on the chart
plot(jaw, color=color.blue, title="Jaw")
plot(teeth, color=color.red, title="Teeth")
plot(lips, color=color.green, title="Lips")

// Determine the trend state
isAlligatorSleeping = (lips < teeth and teeth < jaw) or (lips > teeth and teeth > jaw)
isAlligatorEating = lips > teeth and teeth > jaw

// Buy Signal:
// 1. Alligator transitions from sleeping to eating (trend starts)
// 2. Price moves above the Lips, suggesting a bullish trend
buySignal = isAlligatorSleeping[1] and isAlligatorEating and close > lips

// Sell Signal:
// 1. Alligator transitions from eating to sleeping (trend might end)
// 2. Price moves below the Lips, suggesting a bearish trend
sellSignal = isAlligatorEating[1] and isAlligatorSleeping and close < lips

// Plot buy and sell signals
plotshape(series=buySignal, location=location.belowbar, color=color.green, style=shape.triangleup, title="Buy Signal", size=size.small)
plotshape(series=sellSignal, location=location.abovebar, color=color.red, style=shape.triangledown, title="Sell Signal", size=size.small)

// Alert conditions for indicator
alertcondition(buySignal, title="Buy Signal Alert", message="Williams Alligator Buy Signal")
alertcondition(sellSignal, title="Sell Signal Alert", message="Williams Alligator Sell Signal")
